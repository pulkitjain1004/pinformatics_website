<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width; initial-scale=1.0">
	<title>Lab2</title>

    <link href="mobile.css" rel="stylesheet" type="text/css" media="screen and (max-width:751px)"/>
    <link href="nav.css" rel="stylesheet" type="text/css" media="screen and (min-width:750px)"/>
    <link href="print.css" rel="stylesheet" type="text/css" media="print"/>            

	<style type="text/css">
    </style>	
</head>

<body>
	<header>
		<h1> <center> Lab#2 Variables & Conditions </center> </h1>
		<h2> <center> Recommended Work Time: One week </center> </h2>
	</header>
	<div id="wrapper">	
		<nav id="side">
	    	<ul>
		        <li><a href="index.html"> Home</a></li>
		        <li><a href="A1.html"> Assignment 1 </a></li>
		        <li><a href="A2.html"> Assignment 2 </a>
		        	<ul>
		        		<li><a href="L2.html"> Lab 2 </a></li>
		        		<li><a href="L2S.html"> Lab 2 Supp. </a></li>
		        		<li><a href="A2.html"> Assignment 2 </a></li>
		        	</ul>
		        </li>
		        <li><a href="A3.html"> Assignment 3 </a>
		        	<ul>
		        		<li><a href="L3.html"> Lab 3 </a></li>
		        		<li><a href="A3.html"> Assignment 3 </a></li>
		        	</ul>
		        </li>
		        <li><a href="A4.html"> Assignment 4</a>
		        	<ul>
		        		<li><a href="data/lab4.zip" dwonload> Lab4 </a></li>
		        		<li><a href="A4.html"> Assignment 4 </a></li>
		        		<li><a href="A4A.html"> Assignment 4 Alt. </a></li>
		        		<li><a href="A4S.html"> Assignment 4 Supp. </a></li>
		        	</ul>
		        </li>
		        <li><a href="A5.html"> Assignment 5</a> </li>  
		        <li><a href="Final.html"> Final Project</a></li>
		    </ul>
	    </nav>
	    <div id= "top">
			<h3>Table of Contents</h3>
			<ol>
				<li><a href="#OVV">Overview</a></li>
				<li><a href="#OBJ">Objective</a></li>
				<li><a href="#SET">Setting Up</a></li>
				<li><a href="#LAB">Lab2</a></li>
			</ol>
		</div>
		<article>
			<a name="OVV"></a>
			<p><b><u>Overview</u></b><br>
				Most assignments will have a companion lab to help you learn the task and should cover similar content.  You will be given time in class to work on the lab and ask me questions as you work through them.  You should seek help from all sources (me, peers, internet) in doing this labs.  You do not need to document sources of help as this is a learning experience, rather than a graded homework.  However, it is your responsibility to complete the lab outside of class, if you were not able to complete them during the allotted time in class.  There will not always be sufficient time in class to complete, but it is important that you complete them in order to learn the required contents. <br><br>
				<b>Labs are part of the companion assignment.  Labs will not be graded, but if you do not submit them 2 points will be taken off the companion assignment grade.</b><br><br>
				<b>Submission.</b> Labs are due on the same day as the companion assignments.  Attach the following to the companion assignment submissions
				<ul>
					<li>Commented code (SAS: lnameN_lab.sas, where N indicates the assignment number and lname is your last name)</li>
					<li>Output from your code (SAS: lnameN_lab.log & lnameN_lab.lst or lnameN_lab.html)</li>
				</ul>
			</p>
			<p>
				<a name="OBJ"></a>
				<b><u>Objective</u></b><br>
				In this assignment, you will learn the basics of working with one dataset.  By the end of this assignment, you should be able to
				<ul>
					<li>To write conditional logic codes</li>
					<li>Subset columns (variables) & rows (observations) from a given table</li>
					<li>Recode, rename variables and calculate new variables</li>
					<li>Label variables and values</li>
				</ul>
			</p>
			<p>
				<a name="SET"></a>
				<b><u>Setting Up</u></b>
				<ol>
					<li>Create a working directory, often referred to as pwd (present working directory), where you will work on this assignment. For example, “lab2”. You will be writing code in lab2/</li>
					<li>Create a sub directory data/. When you are writing programs, it is often a good idea to put your code in a different directory from your datasets, because if you are writing a lot of code, or working with a lot of datasets, you will stay more organized.</li>
				</ol>
				<b>Getting Data:</b> Download 2010 National Survey on Drug Use and Health (NSDUH) dataset which is conducted by SAMHSA and housed at the Inter-university Consortium for Political and Social Research (ICPSR) at the University of Michigan.<br><br>

				This dataset contains survey measures for the prevalence and correlates of drug use in the United States, such as information on illicit drugs, alcohol, and tobacco use, substance abuse treatment history, DSM diagnostic criteria, personal and family income sources and amounts, health care access and coverage, illegal activities and arrest record, neighborhood safety/context, and respondent demographics. The goals of this homework are for you to download and import this data into SAS; clean and recode this data using the survey documentation as a guide; and some basic, descriptive patterns in the data as instructed below.<br><br>

				Data housed at ICPSR are generally well maintained and documented, and they usually have SAS versions of the datasets available for download (which saves you from having to convert and label your data).  <br><br>

				At this point, the website will ask you to create a free log in (probably only if you are o_ campus { if you are on campuses it should recognize your IP address on campus) and agree to terms of service. Your browser should start downloading a .zip _ " This dataset, called \32722-0001-Data.dta", is the dataset you will use in this assignment.<br><br>
				<ol>
					<li>Go to <a href="http://doi.org/10.3886/ICPSR32722.v4" target ="_blank">http://doi.org/10.3886/ICPSR32722.v4 </a></li>
					<li>Download the required SETUP files.  DO NOT download the SAS links.</li>
					<li>You should read the data use agreement, so you understand what is allowed with the data.</li>
					<li>You should have download something like ICPSR 32722.zip. You will need to unzip these into the lab2/.  There is a subfolder (called \DS0001") that contains the dataset documentation and code required to setup the data.</li>
					<li>copy the data file (DS0001/32722-0001-Data.txt) into data/nsduh.txt (renamed)</li>
					<li>copy the required code file into lab2/
						<ol type="a">
							<li>SAS1: DS0001/32722-0001-Data.sas into lab2/nsduh.sas (renamed)</li>
							<li>SAS2: edit the sas program as follows and take out comments for formats & missing
								<br>--- FROM
								<br>< DATA;
								<br>< INFILE "data-filename" LRECL=6836;
								<br>--- TO
								<br>> DATA data.nsduh;
								<br>> INFILE "data/nsduh.txt" LRECL=6836;
							</li>
							<li>Scan the program.  See how they are doing things.</li>
							<li>Run your program (You do NOT need to submit the log/lst for this)</li>
						</ol>
					</li>
				</ol>
			</p>
			<p>
				<a name="LAB"></a>

				<b>Use the Dataset</b><br>
				This is a large dataset - so the dataset should be used with care. If you load this dataset fully you will have:<br>
				&nbsp; &nbsp; &nbsp; &nbsp; obs: 57,873<br>
				&nbsp; &nbsp; &nbsp; &nbsp; vars: 3,112<br>
				&nbsp; &nbsp; &nbsp; &nbsp; size: 364,831,392 or 364MB<br>
			</p>
			<P>
				<b><u>P1.  Subset vars</u></b><br>
				SAS: use keep statements.<br><br>
				The following variables are what we will use for this assignment.  They are indicators for substance use, treatment, insurance coverage, race, gender, health status, age, work status, and county of residence.  caseid, cigever, alcever, cocever, mjever, txever, medicare, caidchip, champus, prvhltin, income, health, irsex, catage, newrace2, coutyp2, wrkhrsw2<br><br>

				<b><u>P2.  Describing the Data</u></b><br>
				<u>P2.1. Describe the dataset</u>, including the number of obs and vars that are in your subset of data.<br><br>

				<u>P2.2 Check your data.</u>
				<ol type="a">
				<li>Examine each variable for its range (min to max) or number of categories. (proc means, proc freq))</li>
				<li>Discuss any anomalies you see in this data (such as an abnormally high or low values) <br>
				Be sure to read the codebook documentation provided by ICPSR. (Tell me why there are odd values/categories in some variables </li>
				</ol>

				<b><u>P3.  Cleaning and Manipulating the Data</u></b><br>
				Preparing your data for analysis usually involves:
				<ul>
					<li>Adding or changing variable labels, variable names, and value labels;</li>
					<li>Checking and coding missing values;</li>
					<li>Calculating new variables or manipulating existing variables so that you can use them for analysis
						<ul><li>assignment statements</li></ul></li>
					<li>Checking and correcting the data formats (Next Lab);</li>
					<li>Reshaping and combining tables (Next Lab);</li>
				</ul>

				<u>P3.1 Calculating new variables or manipulating existing variables</u><br>
				In this section you will calculate some variables that we can use in the next section for descriptive analysis
				<ul>
					<li>Generate a new variable, called subst, that is equal to 1 if the respondent has ever had any substance in our sub-dataset (ever responded YES to using cigarette, alcohol, cocaine, marijuana) and equal to zero otherwise.</li>
					<li>Print a few observations to check that you have coded correctly.  Make sure you check for different situations when checking.</li>
					<li>Generate a new variable, called type_insur, that is 0 if the respondent has no insurance of  any kind, 1 if the respondent has government-based/public insurance (medicaid, medicare, or champus/tricare/va insurance), and 2 if the respondent has private insurance. If the person has both public and private insurance, code them as 3.</li>
					<li>Print a few observations to check that you have coded correctly.  Make sure you check for different situations when checking. For example, coded as 3.</li>
				</ul>

				<u>P3.2 Checking and coding missing values: MJEVER</u>
				<ul>
					<li>Recode MJEVER variables to be 1 for YES, and 0 for NO. It is currently coded 2 for NO.  (assignment statements)</li>
					<li>Check the mean of MJVER. This should give you the percent YES. Does it?</li>
					<li>Use the codebook or setup programs to determine if MJVER have missing value codes. If so, make sure those values are coded as missing value codes so that they will affect analysis (like calculation of a mean).  Missing numerical values are ‘.’, and strings are ‘’ (NO space between quotes).</li>
					<li>Recalculate the mean of MJEVER you recoded for missing and compare with previous </li>
					<li>Now code missing properly for all variables, except the ever variables (which you will do below).  I find using the setup programs very useful for this. But you can use any of the documents you downloaded.</li>
				</ul>

				<u>P3.3 Calculating new variables or manipulating existing variables</u><br>
				Now you are going to repeat what you did above using DIFFERENT code.  Learning different ways to do the same task is a good way to learn to code well.  Some sections of the code can be the same as before.
				<ul>
					<li>Create a new binary variable for all your “ever” variables by adding 'b' (for binary) as prefix of the same variable name (i.e., "cigever" to " bcigever ")</li>
					<li>Code all binary variables to be 1 for YES, 0 for NO, and missing for all other values.  For analysis, this is the best way to code all binary variables.</li>
					<li>Labels your variables (BOTH: label)</li>
					<li>Label your values (proc format)</li>
					<li>Drop the original “ever” variables (BOTH: drop)</li>
					<li>Print a few observations and basic descriptives to check everything is correct.</li>
				</ul>

				<u>P3.4 Adding or changing variable labels, variable names, and value labels</u>
				<ul>
					<li>Rename the CASEID variables to ncaseid, for numerical. (BOTH: rename)</li>
					<li>Label the variable and values subst and type_insur </li>
					<li>Print a few observations and basic descriptives to check everything is correct.</li>
					<li>Display the variable labels for all variables in this dataset.</li>
				</ul>

				<u>P3.5 Save out your data (i.e. into data/mynsduh) into a permanent dataset for use later. </u>
				<ul><li>Do the above in a data step</li></ul>


				<b><u>P4.  Learning Your Data (Descriptive Analysis)</u></b><br>
				In this section you will perform some descriptive analysis of continuous and categorical data in the subset of data.<br><br>

				<u>P4.0 Identify variables by type </u><br>
				Look at the descriptive to initially determine variables by type
				<ul>
					<li>Continuous variables</li>
					<li>Categorical variables (both ordinal and nominal)</li>
					<li>Binary variables (you should have explored this in the previous section)</li>
					<li>ID variables (not meaningful)</li>
				</ul>

				<u>P4.1 Create a summary table for any continuous variables </u><br>
				Include the mean, standard deviation, p99, and N (total Number) values in this
				table for each continuous variable.
				<ul><li>proc means</li></ul>


				<u>P4.2 Create these cross-tabulations for categorical variables</u><br>
				Several commands can be used to examine categorical data. These commands can be used to examine descriptive/bivariate relationships between variables in the form of cross-tabulations.
				<ul><li> proc freq; tables var1 var2 /nocol norow nopercent</li></ul>


				<u>P4.2a Ever Used any Substance - subst</u><br>
				Explore the relationship between subst and any 2 of the respondent characteristics (age, gender, income, county type, race/ethnicity). For instance, what percent and/or number of males have ever used any of the substances versus females?  What are the differences between substance use across race/ethnicity categories?<br><br>

				<u>P4.2b. Subset rows: Alcohol or Drug Treatment - txever</u><br>
				Answer the following: what percent of respondents who have ever used a substance and make $75,000 or more dollars have been to Alcohol/Drug Treatment?
				<ul>
					<li>First subset the table to only those who have had substance use</li>
					<li> where conditional</li>
				</ul>

				<u>P4.2c. Overall Health Status - health</u><br>
				What is breakdown of Health Status (e.g. % Excellent, %V.Good, %Good, %Fair, %Poor) for respondents with the following characteristics/attributes: female, over the age of 25, they have used a substance, they are Hispanic or NonHispanic White
			</P>
		</article>
	</div>
</body>
</html>
